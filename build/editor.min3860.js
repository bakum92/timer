!function(k,x,e,C){"use strict";k.fn.checkbox=function(h){var m,e=k(this),g=e.selector||"",p=(new Date).getTime(),v=[],y=h,b="string"==typeof y,w=[].slice.call(arguments,1);return e.each(function(){var s,a=k.extend(!0,{},k.fn.checkbox.settings,h),e=a.className,t=a.namespace,n=a.selector,l=a.error,o="."+t,i="module-"+t,r=k(this),d=k(this).find(n.label).first(),c=k(this).find(n.input),u=r.data(i),f=this;s={initialize:function(){s.create.label(),s.add.events(),s.is.checked()?(s.set.checked(),a.fireOnInit&&k.proxy(a.onChecked,c.get())()):(s.remove.checked(),a.fireOnInit&&k.proxy(a.onUnchecked,c.get())()),s.observeChanges(),s.instantiate()},instantiate:function(){u=s,r.data(i,s)},destroy:function(){s.remove.events(),r.removeData(i)},refresh:function(){r=k(this),d=k(this).find(n.label).first(),c=k(this).find(n.input)},observeChanges:function(){"MutationObserver"in x&&new MutationObserver(function(e){s.refresh()}).observe(f,{childList:!0,subtree:!0})},attachEvents:function(e,t){var n=k(e);t=k.isFunction(s[t])?s[t]:s.toggle,0<n.size()?n.on("click"+o,t):s.error(l.notFound)},event:{keydown:function(e){var t=e.which,n=13;t==27&&r.blur(),e.ctrlKey||t!=n||(k.proxy(s.toggle,this)(),e.preventDefault())}},is:{radio:function(){return r.hasClass(e.radio)},checked:function(){return c.prop("checked")!==C&&c.prop("checked")},unchecked:function(){return!s.is.checked()}},can:{change:function(){return!(r.hasClass(e.disabled)||r.hasClass(e.readOnly)||c.prop("disabled"))},uncheck:function(){return"boolean"==typeof a.uncheckable?a.uncheckable:!s.is.radio()}},set:{checked:function(){r.addClass(e.checked)},tab:function(){c.attr("tabindex")===C&&c.attr("tabindex",0)}},create:{label:function(){0<c.prevAll(n.label).size()?c.prev(n.label).detach().insertAfter(c):s.has.label()||(d=k("<label>").insertAfter(c))}},has:{label:function(){return 0<d.size()}},add:{events:function(){r.on("click"+o,s.toggle).on("keydown"+o,n.input,s.event.keydown)}},remove:{checked:function(){r.removeClass(e.checked)},events:function(){r.off(o).removeData(i),c.off(o,s.event.keydown),d.off(o)}},enable:function(){r.removeClass(e.disabled),c.prop("disabled",!1),k.proxy(a.onEnabled,c.get())()},disable:function(){r.addClass(e.disabled),c.prop("disabled","disabled"),k.proxy(a.onDisabled,c.get())()},check:function(){c.prop("checked",!0).trigger("change"),s.set.checked(),k.proxy(a.onChange,c.get())(),k.proxy(a.onChecked,c.get())()},uncheck:function(){c.prop("checked",!1).trigger("change"),s.remove.checked(),k.proxy(a.onChange,c.get())(),k.proxy(a.onUnchecked,c.get())()},toggle:function(e){s.can.change()&&(s.is.unchecked()?s.check():s.is.checked()&&s.can.uncheck()&&s.uncheck())},setting:function(e,t){if(k.isPlainObject(e))k.extend(!0,a,e);else{if(t===C)return a[e];a[e]=t}},internal:function(e,t){if(k.isPlainObject(e))k.extend(!0,s,e);else{if(t===C)return s[e];s[e]=t}},error:function(){s.error=Function.prototype.bind.call(console.error,console,a.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var t,n;a.performance&&(n=(t=(new Date).getTime())-(p||t),p=t,v.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:f,"Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,100)},display:function(){var e=a.name+":",n=0;p=!1,clearTimeout(s.performance.timer),k.each(v,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",g&&(e+=" '"+g+"'"),(console.group!==C||console.table!==C)&&0<v.length&&(console.groupCollapsed(e),console.table&&console.table(v),console.groupEnd()),v=[]}},invoke:function(a,e,t){var o,i,n,r=u;return e=e||w,t=f||t,"string"==typeof a&&r!==C&&(a=a.split(/[\. ]/),o=a.length-1,k.each(a,function(e,t){var n=e!=o?t+a[e+1].charAt(0).toUpperCase()+a[e+1].slice(1):a;if(k.isPlainObject(r[n])&&e!=o)r=r[n];else{if(r[n]!==C)return i=r[n],!1;if(!k.isPlainObject(r[t])||e==o)return r[t]!==C?i=r[t]:s.error(l.method,a),!1;r=r[t]}})),k.isFunction(i)?n=i.apply(t,e):i!==C&&(n=i),k.isArray(m)?m.push(n):m!==C?m=[m,n]:n!==C&&(m=n),i}},b?(u===C&&s.initialize(),s.invoke(y)):(u!==C&&s.destroy(),s.initialize())}),m!==C?m:this},k.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",performance:!0,uncheckable:"auto",fireOnInit:!0,onChange:function(){},onChecked:function(){},onUnchecked:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",disabled:"disabled",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{input:"input[type=checkbox], input[type=radio]",label:"label"}}}(jQuery,window,document),function(Y){"use strict";var e={i18n:{ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,a;for(n=t||0,a=this.length;n<a;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Y.fn.xdsoftScroller=function(p){return this.each(function(){var i,r,s,l,d,c=Y(this),n=function(e){var t,n={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.clientX,n.y=t.clientY):"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type||(n.x=e.clientX,n.y=e.clientY),n},u=100,a=!1,o=0,f=0,h=0,t=!1,m=0,g=function(){};"hide"!==p?(Y(this).hasClass("xdsoft_scroller_box")||(i=c.children().eq(0),r=c[0].clientHeight,s=i[0].offsetHeight,l=Y('<div class="xdsoft_scrollbar"></div>'),d=Y('<div class="xdsoft_scroller"></div>'),l.append(d),c.addClass("xdsoft_scroller_box").append(l),g=function(e){var t=n(e).y-o+m;t<0&&(t=0),t+d[0].offsetHeight>h&&(t=h-d[0].offsetHeight),c.trigger("scroll_element.xdsoft_scroller",[u?t/u:0])},d.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(e){r||c.trigger("resize_scroll.xdsoft_scroller",[p]),o=n(e).y,m=parseInt(d.css("margin-top"),10),h=l[0].offsetHeight,"mousedown"===e.type?(document&&Y(document.body).addClass("xdsoft_noselect"),Y([document.body,window]).on("mouseup.xdsoft_scroller",function e(){Y([document.body,window]).off("mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),Y(document.body).on("mousemove.xdsoft_scroller",g)):(t=!0,e.stopPropagation(),e.preventDefault())}).on("touchmove",function(e){t&&(e.preventDefault(),g(e))}).on("touchend touchcancel",function(e){t=!1,m=0}),c.on("scroll_element.xdsoft_scroller",function(e,t){r||c.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=1<t?1:t<0||isNaN(t)?0:t,d.css("margin-top",u*t),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-r)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,n){var a,o;r=c[0].clientHeight,s=i[0].offsetHeight,o=(a=r/s)*l[0].offsetHeight,1<a?d.hide():(d.show(),d.css("height",parseInt(10<o?o:10,10)),u=l[0].offsetHeight-d[0].offsetHeight,!0!==n&&c.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(i.css("marginTop"),10))/(s-r)]))}),c.on("mousewheel",function(e){var t=Math.abs(parseInt(i.css("marginTop"),10));return(t-=20*e.deltaY)<0&&(t=0),c.trigger("scroll_element.xdsoft_scroller",[t/(s-r)]),e.stopPropagation(),!1}),c.on("touchstart",function(e){a=n(e),f=Math.abs(parseInt(i.css("marginTop"),10))}),c.on("touchmove",function(e){if(a){e.preventDefault();var t=n(e);c.trigger("scroll_element.xdsoft_scroller",[(f-(t.y-a.y))/(s-r)])}}),c.on("touchend touchcancel",function(e){a=!1,f=0})),c.trigger("resize_scroll.xdsoft_scroller",[p])):c.find(".xdsoft_scrollbar").hide()})},Y.fn.datetimepicker=function(C){var a,t,T,u=17,f=13,h=27,m=37,g=38,D=39,$=40,M=9,S=116,_=65,I=67,O=86,P=90,N=89,H=!1,F=Y.isPlainObject(C)||!C?Y.extend(!0,{},e,C):Y.extend(!0,{},e),o=0;return a=function(r){var t,a,n,p,v=Y("<div "+(F.id?'id="'+F.id+'"':"")+" "+(F.style?'style="'+F.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+F.theme+" xdsoft_noselect "+(F.weeks?" xdsoft_showweeks":"")+F.className+'"></div>'),e=Y('<div class="xdsoft_copyright"><a target="_blank" href="//xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),o=Y('<div class="xdsoft_datepicker active"></div>'),y=Y('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),b=Y('<div class="xdsoft_calendar"></div>'),s=Y('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),d=s.find(".xdsoft_time_box").eq(0),w=Y('<div class="xdsoft_time_variant"></div>'),k=Y('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),x=Y('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),l=!1,i=0;function c(){var e,t=!1;return F.startDate?t=T.strToDate(F.startDate):(t=F.value||(r&&r.val&&r.val()?r.val():""))?t=T.strToDateTime(t):F.defaultDate&&(t=T.strToDate(F.defaultDate),F.defaultTime&&(e=T.strtotime(F.defaultTime),t.setHours(e.getHours()),t.setMinutes(e.getMinutes()))),t&&T.isValidDate(t)?v.data("changed",!0):t="",t||0}y.find(".xdsoft_month span").after(k),y.find(".xdsoft_year span").after(x),y.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(e){var t,n,a=Y(this).find(".xdsoft_select").eq(0),o=0,i=0,r=a.is(":visible");for(y.find(".xdsoft_select").hide(),T.currentTime&&(o=T.currentTime[Y(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),a[r?"hide":"show"](),t=a.find("div.xdsoft_option"),n=0;n<t.length&&t.eq(n).data("value")!==o;n+=1)i+=t[0].offsetHeight;return a.xdsoftScroller(i/(a.children()[0].offsetHeight-a[0].clientHeight)),e.stopPropagation(),!1}),y.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(e){var t=T.currentTime.getFullYear();T&&T.currentTime&&T.currentTime[Y(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](Y(this).data("value")),Y(this).parent().parent().hide(),v.trigger("xchange.xdsoft"),F.onChangeMonth&&Y.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(v,T.currentTime,v.data("input")),t!==T.currentTime.getFullYear()&&Y.isFunction(F.onChangeYear)&&F.onChangeYear.call(v,T.currentTime,v.data("input"))}),v.setOptions=function(e){if(F=Y.extend(!0,{},F,e),e.allowTimes&&Y.isArray(e.allowTimes)&&e.allowTimes.length&&(F.allowTimes=Y.extend(!0,[],e.allowTimes)),e.weekends&&Y.isArray(e.weekends)&&e.weekends.length&&(F.weekends=Y.extend(!0,[],e.weekends)),e.disabledDates&&Y.isArray(e.disabledDates)&&e.disabledDates.length&&(F.disabledDates=Y.extend(!0,[],e.disabledDates)),!F.open&&!F.opened||F.inline||r.trigger("open.xdsoft"),F.inline&&(l=!0,v.addClass("xdsoft_inline"),r.after(v).hide()),F.inverseButton&&(F.next="xdsoft_prev",F.prev="xdsoft_next"),F.datepicker?o.addClass("active"):o.removeClass("active"),F.timepicker?s.addClass("active"):s.removeClass("active"),F.value&&(r&&r.val&&r.val(F.value),T.setCurrentTime(F.value)),isNaN(F.dayOfWeekStart)?F.dayOfWeekStart=0:F.dayOfWeekStart=parseInt(F.dayOfWeekStart,10)%7,F.timepickerScrollbar||d.xdsoftScroller("hide"),F.minDate&&/^-(.*)$/.test(F.minDate)&&(F.minDate=T.strToDateTime(F.minDate).dateFormat(F.formatDate)),F.maxDate&&/^\+(.*)$/.test(F.maxDate)&&(F.maxDate=T.strToDateTime(F.maxDate).dateFormat(F.formatDate)),y.find(".xdsoft_today_button").css("visibility",F.todayButton?"visible":"hidden"),F.mask){var i=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(t)};r.off("keydown.xdsoft"),!0===F.mask&&(F.mask=F.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===Y.type(F.mask)&&(i(F.mask,r.val())||r.val(F.mask.replace(/[0-9]/g,"_")),r.on("keydown.xdsoft",function(e){var t,n,a=this.value,o=e.which;if(48<=o&&o<=57||96<=o&&o<=105||8===o||46===o){for(t=function(e){try{if(document.selection&&document.selection.createRange)return document.selection.createRange().getBookmark().charCodeAt(2)-2;if(e.setSelectionRange)return e.selectionStart}catch(e){return 0}}(this),n=8!==o&&46!==o?String.fromCharCode(96<=o&&o<=105?o-48:o):"_",8!==o&&46!==o||!t||(t-=1,n="_");/[^0-9_]/.test(F.mask.substr(t,1))&&t<F.mask.length&&0<t;)t+=8===o||46===o?-1:1;if(a=a.substr(0,t)+n+a.substr(t+1),""===Y.trim(a))a=F.mask.replace(/[0-9]/g,"_");else if(t===F.mask.length)return e.preventDefault(),!1;for(t+=8===o||46===o?0:1;/[^0-9_]/.test(F.mask.substr(t,1))&&t<F.mask.length&&0<t;)t+=8===o||46===o?-1:1;i(F.mask,a)?(this.value=a,function(e,t){if(!(e="string"==typeof e||e instanceof String?document.getElementById(e):e))return;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}!!e.setSelectionRange&&e.setSelectionRange(t,t)}(this,t)):""===Y.trim(a)?this.value=F.mask.replace(/[0-9]/g,"_"):r.trigger("error_input.xdsoft")}else if(-1!==[_,I,O,P,N].indexOf(o)&&H||-1!==[h,g,$,m,D,S,u,M,f].indexOf(o))return!0;return e.preventDefault(),!1}))}F.validateOnBlur&&r.off("blur.xdsoft").on("blur.xdsoft",function(){F.allowBlank&&!Y.trim(Y(this).val()).length?(Y(this).val(null),v.data("xdsoft_datetime").empty()):(Date.parseDate(Y(this).val(),F.format)||Y(this).val(T.now().dateFormat(F.format)),v.data("xdsoft_datetime").setCurrentTime(Y(this).val())),v.trigger("changedatetime.xdsoft")}),F.dayOfWeekStartPrev=0===F.dayOfWeekStart?6:F.dayOfWeekStart-1,v.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},v.data("options",F).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),x.hide(),k.hide(),!1}),d.append(w),d.xdsoftScroller(),v.on("afterOpen.xdsoft",function(){d.xdsoftScroller()}),v.append(o).append(s),!0!==F.withoutCopyright&&v.append(e),o.append(y).append(b),Y(F.parentID).append(v),T=new function(){var o=this;o.now=function(e){var t,n,a=new Date;return!e&&F.defaultDate&&(t=o.strToDate(F.defaultDate),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate())),F.yearOffset&&a.setFullYear(a.getFullYear()+F.yearOffset),!e&&F.defaultTime&&(n=o.strtotime(F.defaultTime),a.setHours(n.getHours()),a.setMinutes(n.getMinutes())),a},o.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},o.setCurrentTime=function(e){o.currentTime="string"==typeof e?o.strToDateTime(e):o.isValidDate(e)?e:o.now(),v.trigger("xchange.xdsoft")},o.empty=function(){o.currentTime=null},o.getCurrentTime=function(e){return o.currentTime},o.nextMonth=function(){var e,t=o.currentTime.getMonth()+1;return 12===t&&(o.currentTime.setFullYear(o.currentTime.getFullYear()+1),t=0),e=o.currentTime.getFullYear(),o.currentTime.setDate(Math.min(new Date(o.currentTime.getFullYear(),t+1,0).getDate(),o.currentTime.getDate())),o.currentTime.setMonth(t),F.onChangeMonth&&Y.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(v,T.currentTime,v.data("input")),e!==o.currentTime.getFullYear()&&Y.isFunction(F.onChangeYear)&&F.onChangeYear.call(v,T.currentTime,v.data("input")),v.trigger("xchange.xdsoft"),t},o.prevMonth=function(){var e=o.currentTime.getMonth()-1;return-1===e&&(o.currentTime.setFullYear(o.currentTime.getFullYear()-1),e=11),o.currentTime.setDate(Math.min(new Date(o.currentTime.getFullYear(),e+1,0).getDate(),o.currentTime.getDate())),o.currentTime.setMonth(e),F.onChangeMonth&&Y.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(v,T.currentTime,v.data("input")),v.trigger("xchange.xdsoft"),e},o.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},o.strToDateTime=function(e){var t,n,a=[];return e&&e instanceof Date&&o.isValidDate(e)?e:((a=/^(\+|\-)(.*)$/.exec(e))&&(a[2]=Date.parseDate(a[2],F.formatDate)),n=a&&a[2]?(t=a[2].getTime()-6e4*a[2].getTimezoneOffset(),new Date(T.now().getTime()+parseInt(a[1]+"1",10)*t)):e?Date.parseDate(e,F.format):o.now(),o.isValidDate(n)||(n=o.now()),n)},o.strToDate=function(e){if(e&&e instanceof Date&&o.isValidDate(e))return e;var t=e?Date.parseDate(e,F.formatDate):o.now(!0);return o.isValidDate(t)||(t=o.now(!0)),t},o.strtotime=function(e){if(e&&e instanceof Date&&o.isValidDate(e))return e;var t=e?Date.parseDate(e,F.formatTime):o.now(!0);return o.isValidDate(t)||(t=o.now(!0)),t},o.str=function(){return o.currentTime.dateFormat(F.format)},o.currentTime=this.now()},y.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){v.data("changed",!0),T.setCurrentTime(0),v.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){r.val(T.str()),v.trigger("close.xdsoft")}),y.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var n=Y(this),a=0,o=!1;!function e(t){T.currentTime.getMonth();n.hasClass(F.next)?T.nextMonth():n.hasClass(F.prev)&&T.prevMonth(),F.monthChangeSpinner&&(o||(a=setTimeout(e,t||100)))}(500),Y([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(a),o=!0,Y([document.body,window]).off("mouseup.xdsoft",e)})}),s.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var i=Y(this),r=0,s=!1,l=110;!function e(t){var n=d[0].clientHeight,a=w[0].offsetHeight,o=Math.abs(parseInt(w.css("marginTop"),10));i.hasClass(F.next)&&a-n-F.timeHeightInTimePicker>=o?w.css("marginTop","-"+(o+F.timeHeightInTimePicker)+"px"):i.hasClass(F.prev)&&0<=o-F.timeHeightInTimePicker&&w.css("marginTop","-"+(o-F.timeHeightInTimePicker)+"px"),d.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(w.css("marginTop"),10)/(a-n))]),l=10<l?10:l-10,s||(r=setTimeout(e,t||l))}(500),Y([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(r),s=!0,Y([document.body,window]).off("mouseup.xdsoft",e)})}),t=0,v.on("xchange.xdsoft",function(e){clearTimeout(t),t=setTimeout(function(){for(var e,t,n,a,o,i,r,s="",l=new Date(T.currentTime.getFullYear(),T.currentTime.getMonth(),1,12,0,0),d=0,c=T.now(),u=!1,f=!1,h=[],m=!0,g="";l.getDay()!==F.dayOfWeekStart;)l.setDate(l.getDate()-1);for(s+="<table><thead><tr>",F.weeks&&(s+="<th></th>"),e=0;e<7;e+=1)s+="<th>"+F.i18n[F.lang].dayOfWeek[(e+F.dayOfWeekStart)%7]+"</th>";for(s+="</tr></thead>",s+="<tbody>",!1!==F.maxDate&&(u=T.strToDate(F.maxDate),u=new Date(u.getFullYear(),u.getMonth(),u.getDate(),23,59,59,999)),!1!==F.minDate&&(f=T.strToDate(F.minDate),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()));d<T.currentTime.countDaysInMonth()||l.getDay()!==F.dayOfWeekStart||T.currentTime.getMonth()===l.getMonth();)h=[],d+=1,t=l.getDate(),n=l.getFullYear(),a=l.getMonth(),o=T.getWeekOfYear(l),h.push("xdsoft_date"),i=F.beforeShowDay&&Y.isFunction(F.beforeShowDay.call)?F.beforeShowDay.call(v,l):null,!1!==u&&u<l||!1!==f&&l<f||i&&!1===i[0]?h.push("xdsoft_disabled"):-1!==F.disabledDates.indexOf(l.dateFormat(F.formatDate))&&h.push("xdsoft_disabled"),i&&""!==i[1]&&h.push(i[1]),T.currentTime.getMonth()!==a&&h.push("xdsoft_other_month"),(F.defaultSelect||v.data("changed"))&&T.currentTime.dateFormat(F.formatDate)===l.dateFormat(F.formatDate)&&h.push("xdsoft_current"),c.dateFormat(F.formatDate)===l.dateFormat(F.formatDate)&&h.push("xdsoft_today"),0!==l.getDay()&&6!==l.getDay()&&-1!==F.weekends.indexOf(l.dateFormat(F.formatDate))||h.push("xdsoft_weekend"),F.beforeShowDay&&Y.isFunction(F.beforeShowDay)&&h.push(F.beforeShowDay(l)),m&&(s+="<tr>",m=!1,F.weeks&&(s+="<th>"+o+"</th>")),s+='<td data-date="'+t+'" data-month="'+a+'" data-year="'+n+'" class="xdsoft_date xdsoft_day_of_week'+l.getDay()+" "+h.join(" ")+'"><div>'+t+"</div></td>",l.getDay()===F.dayOfWeekStartPrev&&(s+="</tr>",m=!0),l.setDate(t+1);if(s+="</tbody></table>",b.html(s),y.find(".xdsoft_label span").eq(0).text(F.i18n[F.lang].months[T.currentTime.getMonth()]),y.find(".xdsoft_label span").eq(1).text(T.currentTime.getFullYear()),a=g="",r=function(e,t){var n=T.now();n.setHours(e),e=parseInt(n.getHours(),10),n.setMinutes(t),t=parseInt(n.getMinutes(),10);var a=new Date(T.currentTime);a.setHours(e),a.setMinutes(t),(!(h=[])!==F.minDateTime&&F.minDateTime>a||!1!==F.maxTime&&T.strtotime(F.maxTime).getTime()<n.getTime()||!1!==F.minTime&&T.strtotime(F.minTime).getTime()>n.getTime())&&h.push("xdsoft_disabled"),(F.initTime||F.defaultSelect||v.data("changed"))&&parseInt(T.currentTime.getHours(),10)===parseInt(e,10)&&(59<F.step||Math[F.roundTime](T.currentTime.getMinutes()/F.step)*F.step===parseInt(t,10))&&(F.defaultSelect||v.data("changed")?h.push("xdsoft_current"):F.initTime&&h.push("xdsoft_init_time")),parseInt(c.getHours(),10)===parseInt(e,10)&&parseInt(c.getMinutes(),10)===parseInt(t,10)&&h.push("xdsoft_today"),g+='<div class="xdsoft_time '+h.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(F.formatTime)+"</div>"},F.allowTimes&&Y.isArray(F.allowTimes)&&F.allowTimes.length)for(d=0;d<F.allowTimes.length;d+=1)r(T.strtotime(F.allowTimes[d]).getHours(),a=T.strtotime(F.allowTimes[d]).getMinutes());else for(e=d=0;d<(F.hours12?12:24);d+=1)for(e=0;e<60;e+=F.step)r((d<10?"0":"")+d,a=(e<10?"0":"")+e);for(w.html(g),C="",d=0,d=parseInt(F.yearStart,10)+F.yearOffset;d<=parseInt(F.yearEnd,10)+F.yearOffset;d+=1)C+='<div class="xdsoft_option '+(T.currentTime.getFullYear()===d?"xdsoft_current":"")+'" data-value="'+d+'">'+d+"</div>";for(x.children().eq(0).html(C),d=0,C="";d<=11;d+=1)C+='<div class="xdsoft_option '+(T.currentTime.getMonth()===d?"xdsoft_current":"")+'" data-value="'+d+'">'+F.i18n[F.lang].months[d]+"</div>";k.children().eq(0).html(C),p(),Y(v).trigger("generate.xdsoft")},10),e.stopPropagation()}).on("afterOpen.xdsoft",function(){var e,t,n,a;F.timepicker&&(w.find(".xdsoft_current").length?e=".xdsoft_current":w.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=d[0].clientHeight,(n=w[0].offsetHeight)-t<(a=w.find(e).index()*F.timeHeightInTimePicker+1)&&(a=n-t),d.trigger("scroll_element.xdsoft_scroller",[parseInt(a,10)/(n-t)])):d.trigger("scroll_element.xdsoft_scroller",[0]))}),a=0,b.on("click.xdsoft","td",function(e){e.stopPropagation(),a+=1;var t=Y(this),n=T.currentTime;if(null==n&&(T.currentTime=T.now(),n=T.currentTime),t.hasClass("xdsoft_disabled"))return!1;n.setDate(1),n.setFullYear(t.data("year")),n.setMonth(t.data("month")),n.setDate(t.data("date")),v.trigger("select.xdsoft",[n]),r.val(T.str()),(1<a||!0===F.closeOnDateSelect||0===F.closeOnDateSelect&&!F.timepicker)&&!F.inline&&v.trigger("close.xdsoft"),F.onSelectDate&&Y.isFunction(F.onSelectDate)&&F.onSelectDate.call(v,T.currentTime,v.data("input"),e),v.data("changed",!0),v.trigger("xchange.xdsoft"),v.trigger("changedatetime.xdsoft"),setTimeout(function(){a=0},200)}),w.on("click.xdsoft","div",function(e){e.stopPropagation();var t=Y(this),n=T.currentTime;if(null==n&&(T.currentTime=T.now(),n=T.currentTime),t.hasClass("xdsoft_disabled"))return!1;n.setHours(t.data("hour")),n.setMinutes(t.data("minute")),v.trigger("select.xdsoft",[n]),v.data("input").val(T.str()),F.inline||v.trigger("close.xdsoft"),F.onSelectTime&&Y.isFunction(F.onSelectTime)&&F.onSelectTime.call(v,T.currentTime,v.data("input"),e),v.data("changed",!0),v.trigger("xchange.xdsoft"),v.trigger("changedatetime.xdsoft")}),o.on("mousewheel.xdsoft",function(e){return!F.scrollMonth||(e.deltaY<0?T.nextMonth():T.prevMonth(),!1)}),r.on("mousewheel.xdsoft",function(e){return!F.scrollInput||(!F.datepicker&&F.timepicker?(0<=(n=w.find(".xdsoft_current").length?w.find(".xdsoft_current").eq(0).index():0)+e.deltaY&&n+e.deltaY<w.children().length&&(n+=e.deltaY),w.children().eq(n).length&&w.children().eq(n).trigger("mousedown"),!1):F.datepicker&&!F.timepicker?(o.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),r.val&&r.val(T.str()),v.trigger("changedatetime.xdsoft"),!1):void 0)}),v.on("changedatetime.xdsoft",function(e){if(F.onChangeDateTime&&Y.isFunction(F.onChangeDateTime)){var t=v.data("input");F.onChangeDateTime.call(v,T.currentTime,t,e),delete F.value,t.trigger("change")}}).on("generate.xdsoft",function(){F.onGenerate&&Y.isFunction(F.onGenerate)&&F.onGenerate.call(v,T.currentTime,v.data("input")),l&&(v.trigger("afterOpen.xdsoft"),l=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),n=0,p=function(){var e=v.data("input").offset(),t=e.top+v.data("input")[0].offsetHeight-1,n=e.left,a="absolute";F.fixed?(t-=Y(window).scrollTop(),n-=Y(window).scrollLeft(),a="fixed"):(t+v[0].offsetHeight>Y(window).height()+Y(window).scrollTop()&&(t=e.top-v[0].offsetHeight+1),t<0&&(t=0),n+v[0].offsetWidth>Y(window).width()&&(n=Y(window).width()-v[0].offsetWidth)),v.css({left:n,top:t,position:a})},v.on("open.xdsoft",function(e){var t=!0;F.onShow&&Y.isFunction(F.onShow)&&(t=F.onShow.call(v,T.currentTime,v.data("input"),e)),!1!==t&&(v.show(),p(),Y(window).off("resize.xdsoft",p).on("resize.xdsoft",p),F.closeOnWithoutClick&&Y([document.body,window]).on("mousedown.xdsoft",function e(){v.trigger("close.xdsoft"),Y([document.body,window]).off("mousedown.xdsoft",e)}))}).on("close.xdsoft",function(e){var t=!0;y.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),F.onClose&&Y.isFunction(F.onClose)&&(t=F.onClose.call(v,T.currentTime,v.data("input"),e)),!1===t||F.opened||F.inline||v.hide(),e.stopPropagation()}).on("toggle.xdsoft",function(e){v.is(":visible")?v.trigger("close.xdsoft"):v.trigger("open.xdsoft")}).data("input",r),i=0,v.data("xdsoft_datetime",T),v.setOptions(F),T.setCurrentTime(c()),r.data("xdsoft_datetimepicker",v).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){r.is(":disabled")||r.is(":hidden")||!r.is(":visible")||r.data("xdsoft_datetimepicker").is(":visible")&&F.closeOnInputClick||(clearTimeout(i),i=setTimeout(function(){r.is(":disabled")||r.is(":hidden")||!r.is(":visible")||(l=!0,T.setCurrentTime(c()),v.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){this.value;var t,n=e.which;return-1!==[f].indexOf(n)&&F.enterLikeTab?(t=Y("input:visible,textarea:visible"),v.trigger("close.xdsoft"),t.eq(t.index(this)+1).focus(),!1):-1!==[M].indexOf(n)?(v.trigger("close.xdsoft"),!0):void 0})},t=function(e){var t=e.data("xdsoft_datetimepicker");t&&(t.data("xdsoft_datetime",null),t.remove(),e.data("xdsoft_datetimepicker",null).off(".xdsoft"),Y(window).off("resize.xdsoft"),Y([window,document.body]).off("mousedown.xdsoft"),e.unmousewheel&&e.unmousewheel())},Y(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===u&&(H=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===u&&(H=!1)}),this.each(function(){var n,e=Y(this).data("xdsoft_datetimepicker");if(e){if("string"===Y.type(C))switch(C){case"show":Y(this).select().focus(),e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"toggle":e.trigger("toggle.xdsoft");break;case"destroy":t(Y(this));break;case"reset":this.value=this.defaultValue,this.value&&e.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,F.format))||e.data("changed",!1),e.data("xdsoft_datetime").setCurrentTime(this.value)}else e.setOptions(C);return 0}"string"!==Y.type(C)&&(!F.lazyInit||F.open||F.inline?a(Y(this)):(n=Y(this)).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function e(t){n.is(":disabled")||n.is(":hidden")||!n.is(":visible")||n.data("xdsoft_datetimepicker")||(clearTimeout(o),o=setTimeout(function(){n.data("xdsoft_datetimepicker")||a(n),n.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",e).trigger("open.xdsoft")},100))}))})},Y.fn.datetimepicker.defaults=e}(jQuery),function(){var re;re=function(f){function t(e){var t=e||window.event,n=v.call(arguments,1),a=0,o=0,i=0,r=0,s=0,l=0;if((e=f.event.fix(t)).type="mousewheel","detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(o=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(o=-1*i,i=0),a=0===i?o:i,"deltaY"in t&&(a=i=-1*t.deltaY),"deltaX"in t&&(o=t.deltaX,0===i&&(a=-1*o)),0!==i||0!==o){if(1===t.deltaMode){var d=f.data(this,"mousewheel-line-height");a*=d,i*=d,o*=d}else if(2===t.deltaMode){var c=f.data(this,"mousewheel-page-height");a*=c,i*=c,o*=c}if(r=Math.max(Math.abs(i),Math.abs(o)),(!p||r<p)&&(m(t,p=r)&&(p/=40)),m(t,r)&&(a/=40,o/=40,i/=40),a=Math[1<=a?"floor":"ceil"](a/p),o=Math[1<=o?"floor":"ceil"](o/p),i=Math[1<=i?"floor":"ceil"](i/p),y.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();s=e.clientX-u.left,l=e.clientY-u.top}return e.deltaX=o,e.deltaY=i,e.deltaFactor=p,e.offsetX=s,e.offsetY=l,e.deltaMode=0,n.unshift(e,a,o,i),g&&clearTimeout(g),g=setTimeout(h,200),(f.event.dispatch||f.event.handle).apply(this,n)}}function h(){p=null}function m(e,t){return y.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var g,p,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(f.event.fixHooks)for(var a=e.length;a;)f.event.fixHooks[e[--a]]=f.event.mouseHooks;var y=f.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t;f.data(this,"mousewheel-line-height",y.getLineHeight(this)),f.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null;f.removeData(this,"mousewheel-line-height"),f.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=f(e),n=t["offsetParent"in f.fn?"offsetParent":"parent"]();return n.length||(n=f("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return f(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};f.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof define&&define.amd?define(["jquery"],re):"object"==typeof exports?module.exports=re:re(jQuery),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){return"unixtime"==e?parseInt(this.getTime()/1e3):(null==Date.formatFunctions[e]&&Date.createNewFormat(e),this[Date.formatFunctions[e]]())},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(0<this.getTimezoneOffset()?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=7-new Date(this.getFullYear(),0,1).getDay()+4;return String.leftPad(Math.ceil((e-t)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var a=new String(e);for(null==n&&(n=" ");a.length<t;)a=n+a;return a},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),TINY={},TINY.box=function(){var i,r,l,d,c,u,t=0;return{show:function(e){for(s in c={opacity:0,close:1,animate:0,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0,footer:"",title:"",closejs:null,onloadevent:null,savePosition:!1},e)e.hasOwnProperty(s)&&(c[s]=e[s]);u?(i.style.display="none",clearTimeout(u.ah),d.v&&(u.removeChild(d),d.v=0)):((i=document.createElement("div")).className="tbox",i.style.zIndex=801,i.id="tbox-colorpiker",(u=document.createElement("div")).className="tinner",(l=document.createElement("div")).className="tcontent",(r=document.createElement("div")).className="tmask",(d=document.createElement("div")).innerHTML="×",d.className="tclose",d.v=0,(t=document.createElement("div")).className="tload",t.style.display="none",document.body.appendChild(r),document.body.appendChild(i),i.appendChild(u),u.appendChild(l),u.appendChild(t),r.onclick=d.onclick=TINY.box.hide,window.onresize=TINY.box.resize),c.savePosition&&null!=window.modalLastPosition&&null!=window.modalLastPosition.top&&null!=window.modalLastPosition.left&&(_left=parseInt(window.modalLastPosition.left),_top=parseInt(window.modalLastPosition.top),0<_top&&0<_left&&(c.top=_top,c.left=_left)),u.id=c.boxid,r.id=c.maskid,i.style.position=c.fixed?"fixed":"absolute",c.html&&(html=document.createElement("div"),c.title&&(titleObject=document.createElement("h2"),"string"==typeof c.title?titleObject.innerHTML=c.title:titleObject.appendChild(c.title),html.appendChild(titleObject)),content=document.createElement("div"),"string"==typeof c.html?content.innerHTML=c.html:content.appendChild(c.html),html.appendChild(content),c.footer&&(footerObject=document.createElement("div"),footerObject.className="modal-footer","string"==typeof c.footer?footerObject.innerHTML=c.footer:footerObject.appendChild(c.footer),html.appendChild(footerObject)),c.html=html,dragMaster.makeDraggable(i,68,c.savePosition)),c.html&&!c.animate?(u.style.backgroundImage="none",l.style.display="",u.style.width=c.width?c.width+"px":"auto",u.style.height=c.height?c.height+"px":"auto"):(l.style.display="none",!c.animate&&c.width&&c.height?(u.style.width=c.width+"px",u.style.height=c.height+"px"):u.style.width=u.style.height="100px"),c.mask?(this.mask(),this.alpha(r,1,c.opacity)):this.alpha(i,1,100),c.autohide?u.ah=setTimeout(TINY.box.hide,1e3*c.autohide):document.onkeyup=TINY.box.esc},fill:function(e,t,n,a,o,i){if(t)if(c.image){var r=new Image;r.onload=function(){o=o||r.width,i=i||r.height,TINY.box.psh(r,a,o,i)},r.src=c.image}else if(c.iframe)this.psh('<iframe src="'+c.iframe+'" width="'+c.width+'" frameborder="0" height="'+c.height+'"></iframe>',a,o,i);else{var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(u.style.backgroundImage="",TINY.box.psh(s.responseText,a,o,i))},n?(s.open("POST",e,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(n)):(s.open("GET",e,!0),s.send(null))}else this.psh(e,a,o,i)},psh:function(e,t,n,a){"object"==typeof e?l.appendChild(e):l.innerHTML=e;var o=u.style.width,i=u.style.height;n&&a||(u.style.width=n?n+"px":"",u.style.height=a?a+"px":"",l.style.display="",a||(a=parseInt(l.offsetHeight)),n||(n=parseInt(l.offsetWidth)),l.style.display="none"),u.style.width=o,u.style.height=i,this.size(n,a,t)},esc:function(e){27==(e=e||window.event).keyCode&&TINY.box.hide()},hideLoad:function(){t.style.display="none"},showLoad:function(){t.style.display="block"},hide:function(){c.closejs&&c.closejs(),TINY.box.alpha(i,-1,0,3),document.onkeypress=null},resize:function(){TINY.box.pos(),TINY.box.mask()},mask:function(){r&&(r.style.height=this.total(1)+"px",r.style.width=this.total(0)+"px")},pos:function(){var e;i&&(e=void 0!==c.top?c.top:(e=this.height()/c.topsplit-i.offsetHeight/2)<20?20:e,c.fixed||c.top||(e+=this.top()),i.style.top=e+"px",i.style.left=void 0!==c.left?c.left+"px":this.width()/2-i.offsetWidth/2+"px")},alpha:function(e,t,n){clearInterval(e.ai),t&&(e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block",TINY.box.pos()),e.ai=setInterval(function(){TINY.box.ta(e,n,t)},20)},ta:function(e,t,n){var a=Math.round(100*e.style.opacity);if(a==t)clearInterval(e.ai),-1==n?(e.style.display="none",u&&(e==i?TINY.box.alpha(r,-1,0,2):l.innerHTML=u.style.backgroundImage="")):e==r?this.alpha(i,1,100):(i.style.filter="",TINY.box.fill(c.html||c.url,c.url||c.iframe||c.image,c.post,c.animate,c.width,c.height)),setTimeout(function(){null!==c.onloadevent&&c.onloadevent()},0);else{var o=t-Math.floor(.5*Math.abs(t-a))*n;e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")"}},size:function(e,t,n){if(n){clearInterval(u.si);var a=parseInt(u.style.width)>e?-1:1,o=parseInt(u.style.height)>t?-1:1;u.si=setInterval(function(){TINY.box.ts(e,a,t,o)},20)}else u.style.backgroundImage="none",c.close&&(u.appendChild(d),d.v=1),u.style.width=e+"px",u.style.height=t+"px",l.style.display="",this.pos(),c.openjs&&c.openjs()},ts:function(e,t,n,a){var o=parseInt(u.style.width),i=parseInt(u.style.height);o==e&&i==n?(clearInterval(u.si),u.style.backgroundImage="none",l.style.display="block",c.close&&(u.appendChild(d),d.v=1),c.openjs&&c.openjs()):(o!=e&&(u.style.width=e-Math.floor(.6*Math.abs(e-o))*t+"px"),i!=n&&(u.style.height=n-Math.floor(.6*Math.abs(n-i))*a+"px"),this.pos())},top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(e){var t=document.body,n=document.documentElement;return e?Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.clientHeight,n.clientHeight)):Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.clientWidth,n.clientWidth))},beforeAnimation:function(){i&&(i.className+=" animation")},destroy:function(){return i&&null!=i.parentNode&&i.parentNode.removeChild(i),r&&null!=r.parentNode&&r.parentNode.removeChild(r),t=u=c=d=l=r=i=0,i},getElement:function(){return i}}}();var dragMaster=function(){var a,o,i,r=!1;function s(e){if(null==(e=e||window.event).pageX&&null!=e.clientX){var t=document.documentElement,n=document.body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0)}return!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}function l(){r&&(window.modalLastPosition={top:a.style.top,left:a.style.left}),a=null,document.onmousemove=null,document.onmouseup=null,document.ondragstart=null,document.body.onselectstart=null}function d(e){return e=s(e),a.style.position="fixed",a.style.top=e.y-o.y+"px",a.style.left=e.x-o.x+"px",!1}function c(e){var t,n;if(1==(e=s(e)).which)return t=e,n=function(e){for(var t=0,n=0;e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:t+=e.offsetLeft,y:n+=e.offsetTop}}(a=this),!(null!=(o={x:t.x-n.x,y:t.y-n.y}).y&&o.y<i)||(document.onmousemove=d,document.onmouseup=l,document.ondragstart=function(){return!1},!(document.body.onselectstart=function(){return!1}))}return{makeDraggable:function(e,t,n){r=n,i=t,e.onmousedown=c}}}();function ColorPicker(e,r,t,n,a,o){n=G(n),imageDirectory="/images/";var s=n||new RGBColor(0,0,0),l=s,d=!1,c=null,u=null,f=null,h=null,m=null,g=null,p=null,v=0,y=0,b=null,w=[],k=[],x=this,C=document.createElement("div");C.className="colorPicker",C.style.position="relative";var T=document.createElement("div");C.appendChild(T),T.className="colorSquare";var D=document.createElement("div");T.appendChild(D),window.XMLHttpRequest?D.style.background='url("'+imageDirectory+'white-fade.png") repeat-y top left':(D.style.width="200px",D.style.height="200px",D.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+imageDirectory+'white-fade.png",sizingMethod="scale")');var $=document.createElement("div");D.appendChild($),window.XMLHttpRequest?$.style.background='url("'+imageDirectory+'black-fade.png") repeat-x top left':($.style.width="200px",$.style.height="200px",$.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+imageDirectory+'black-fade.png",sizingMethod="scale")');var M=document.createElement("div");$.appendChild(M),window.XMLHttpRequest?M.style.backgroundImage='url("'+imageDirectory+'circle.png")':M.style.backgroundImage='url("'+imageDirectory+'square.png")',M.className="circle";var S=document.createElement("div");C.appendChild(S),S.className="hueBar";var _=document.createElement("div");C.appendChild(_),_.className="pointers";var I=document.createElement("div");I.appendChild(document.createTextNode("Новый")),C.appendChild(I),I.className="previewBoxLabel";var O=document.createElement("div");C.appendChild(O),O.className="preview";var P=document.createElement("div");C.appendChild(P),P.className="oldView",s.setColorToNode(P);var N=document.createElement("div");C.appendChild(N),N.appendChild(document.createTextNode("Текущий")),N.className="oldViewBoxLabel";var H=document.createElement("div");C.appendChild(H),H.appendChild(document.createTextNode("Прозрачность:")),H.className="opacityBarLabel";var F=document.createElement("div");C.appendChild(F),F.appendChild(document.createTextNode("0%")),F.className="opacityBarCounter";var Y=document.createElement("div");C.appendChild(Y),Y.className="opacityBar";var E=document.createElement("div");Y.appendChild(E),E.className="opacityBarBackground";var L=document.createElement("div");C.appendChild(L),L.className="opacityPointer";var j=document.createElement("input");C.appendChild(j),j.className="hexadecimalInputBox";var A=document.createElement("button");for(A.appendChild(document.createTextNode("Готово")),C.appendChild(A),A.className="saveButton",X(),e.appendChild(C),fastColorPicker=document.createElement("div"),fastColorPicker.className="fast-color-picker-table",fastColorPicker.id="fast-color-picker-table",fastColorPicker.innerHTML=fastColorPickerSource,r.appendChild(fastColorPicker),function(){var e=r.querySelectorAll(".fast-color-picker-table td");if(0<e.length)for(var t=0;t<e.length;t++)window.addEventListener?e[t].addEventListener("click",R,!1):document.attachEvent&&e[t].attachEvent("onclick",R)}(),z(),t.className="last-colors",t.innerHTML='<div class="last-colors-title">Последние использованные</div>',i=0;i<10;i++)lastColorItem=document.createElement("div"),lastColorItem.className="last-colors-item",lastColorItem.id="last-color-"+i,t.appendChild(lastColorItem);function R(e){element=null,1==this.childNodes.length&&(element=this.firstChild),null!==element&&(s=convertStringColorToRGBColorObject(element.style.backgroundColor),V())}function z(){var e=r.querySelectorAll(".picked");if(0<e.length)for(var t=0;t<e.length;t++)e[t].className="";if(1==s.getRGB().a){var n=r.querySelectorAll(".fast-color-picker-table td div");if(0<n.length)for(var a=s.getCSSIntegerRGB().toLowerCase(),o=0;o<n.length;o++){if(n[o].style.backgroundColor.toLowerCase().replace(/\s+/g,"")==a){n[o].className="picked";break}}}}function B(){s=l,X()}function G(e){return e=null!=e&&null!=e.length&&("string"==typeof e?convertStringColorToRGBColorObject(e):3==e.length?new RGBColor(e[0],e[1],e[2]):4==e.length&&(e[3]=parseFloat(e[3]).toFixed(2),new RGBColor(e[0],e[1],e[2],e[3])))}function q(){return ua=window.navigator.userAgent.toLowerCase(),/trident/gi.test(ua)||/msie/gi.test(ua)}function V(){if(null!==a){for(selectedColor=x.getValue(q()?"rgb":"auto"),-1!==(i=k.indexOf(selectedColor))&&k.splice(i,1),k.unshift(selectedColor);10<k.length;)k.pop();x.updateLastColorsBlock(),a(selectedColor)}}function W(){var e=j.value;e.match(/^#[0-9a-f]{6}$/i)&&(s=new RGBColor(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)),X())}function X(e){null==e&&(e=!1),s.setColorToNode(O),e||null!==o&&x.getValue&&(selectedColor=x.getValue(q()?"rgb":"auto"),o(selectedColor)),Y.style.background=s.getCSSIntegerRGB();var t=s.getHSV();T.style.backgroundColor=new HSVColor(t.h,100,100).getCSSIntegerRGB(),M.style.backgroundPosition=Math.round(t.s/100*255-7)+"px "+Math.round((100-t.v)/100*255-7)+"px",_.style.backgroundPosition="0px "+(255-Math.floor(t.h/360*256))+"px",L.style.backgroundPosition=255-Math.floor(255*t.a)+"px 0px ",F.innerHTML=Math.floor(100-100*t.a)+"%",j.value=s.getCSSHexadecimalRGB();for(var n=0;n<w.length;n++)w[n](s,this)}function J(e){e||(e=window.event),d=!1}function U(e){e||(e=window.event),c=e.screenX,u=e.screenY,e.preventDefault?e.preventDefault():e.returnValue=!1}function Z(e){f=1,ee(e)}function K(e){f=2,ee(e)}function Q(e){f=3,ee(e)}function ee(e){b||(d=!0,e||(e=window.event),U(e),document.body.addEventListener?document.body.addEventListener("mousemove",U,!1):document.body.attachEvent&&document.body.attachEvent("onmousemove",U),h=c,m=u,p=g=null,e.offsetX?(v=e.offsetX,y=e.offsetY):e.layerX&&(v=e.layerX,y=e.layerY),b=window.setInterval(te,20))}function te(){var e=s.getHSV();switch(f){case 1:s=new HSVColor(e.h,(c-h+v)/2.55,100-(u-m+y)/2.55,e.a);break;case 2:s=new HSVColor(359-Math.max(0,Math.min(359,(u-m+y-7)/255*360)),e.s,e.v,e.a);break;case 3:s=new HSVColor(e.h,e.s,e.v,Math.max(0,Math.min(1,1-(c-h+v-7)/255)).toFixed(2))}g==c&&p==u||X(),g=c,p=u,d||(document.body.removeEventListener?document.body.removeEventListener("mousemove",U,!1):document.body.detachEvent&&document.body.detachEvent("onmousemove",U),window.clearInterval(b),b=null)}window.addEventListener?(window.addEventListener("mouseup",J,!1),M.addEventListener("mousedown",Z,!1),_.addEventListener("mousedown",K,!1),L.addEventListener("mousedown",Q,!1),N.addEventListener("click",B,!1),j.addEventListener("keyup",W,!1),A.addEventListener("click",V,!1)):document.attachEvent&&(document.body.attachEvent("onmouseup",J),M.attachEvent("onmousedown",Z),_.attachEvent("onmousedown",K),L.attachEvent("onmousedown",Q),N.attachEvent("click",B),j.attachEvent("onkeyup",W),A.attachEvent("onclick",V)),this.getColor=function(){return s},this.setColor=function(e){s=e,X()},this.addChangeListener=function(e){this.removeChangeListener(e),w.push(e)},this.removeChangeListener=function(e){for(var t=w.length-1;0<=t;t--)w[t]==e&&w.splice(t,1)},this.updateLastColorsBlock=function(){if(null!==k&&0<k.length){for(i=0;i<10;i++)item_=t.querySelector("#last-color-"+i),null!==item_&&(item_.style.backgroundColor="",item_.className="last-colors-item",item_.onclick=function(){});for(i=0,len=k.length;i<len;i++)item_=t.querySelector("#last-color-"+i),null!==item_&&(tempColor=k[i],item_.style.backgroundColor=tempColor,item_.className="last-colors-item active",item_.onclick=function(){s=convertStringColorToRGBColorObject(this.style.backgroundColor),V()})}},this.restoreColor=function(){s=l},this.getValue=function(e){var t;switch(e){case"rgb":t=s.getCSSIntegerRGB();break;case"rgba":t=s.hasOpacity()?s.getCSSIntegerRGBA():s.getCSSIntegerRGB();break;case"hex":t=s.getCSSHexadecimalRGB();break;case"hexRGBA":t=s.getCSSHexadecimalRGBA();break;case"auto":default:t=s.hasOpacity()?s.getCSSIntegerRGBA():s.getCSSHexadecimalRGB()}return t},this.setValue=function(e){(tempColor=G(e))&&(s=tempColor,(l=s).setColorToNode(P),X(!0),z())},this.setHideOpacity=function(e){var t=e?"hidden":"visible";H.style.visibility=t,F.style.visibility=t,Y.style.visibility=t,E.style.visibility=t,L.style.visibility=t},this.setOnSave=function(e){a=e},this.setOnChange=function(e){o=e},this.show=function(){C.style.display="block"},this.hide=function(){C.style.display="none"},this.setLastColors=function(e){k=e,this.updateLastColorsBlock()},this.getLastColors=function(){return k}}function Color(){this.getIntegerRGB=function(){var e=this.getRGB();return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b),a:e.a}},this.hasOpacity=function(){return 1!=this.getRGB().a},this.getCSSHexadecimalRGB=function(){var e=this.getIntegerRGB(),t=e.r.toString(16),n=e.g.toString(16),a=e.b.toString(16);return"#"+(2==t.length?t:"0"+t)+(2==n.length?n:"0"+n)+(2==a.length?a:"0"+a)},this.getCSSHexadecimalRGBA=function(){var e=this.getIntegerRGB(),t=e.r.toString(16),n=e.g.toString(16),a=e.b.toString(16),o=(255*e.a).toString(16);return"#"+(2==o.length?o:"0"+o)+(2==t.length?t:"0"+t)+(2==n.length?n:"0"+n)+(2==a.length?a:"0"+a)},this.getCSSIntegerRGB=function(){var e=this.getIntegerRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},this.getCSSIntegerRGBA=function(){var e=this.getIntegerRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},this.setColorToNode=function(e){e.style.backgroundColor=this.getCSSIntegerRGBA()}}var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",alegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function convertStringColorToRGBColorObject(e){var t=null;if(e=e.toLowerCase(),/^[a-z]+$/.test(e)&&void 0===(e=colorNames[e]))return!1;if(/^#([a-f0-9]{3}){1,2}$/.test(e))4==e.length&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),t=[(e="0x"+e.substring(1))>>16&255,e>>8&255,255&e];else if(0==e.indexOf("rgb")&&(e=e.match(/\d+(\.\d+)?%?/g))){for(var n=0;n<3;n++)-1!=e[n].indexOf("%")&&(e[n]=Math.round(2.55*parseFloat(e[n]))),e[n]<0&&(e[n]=0),255<e[n]&&(e[n]=255);t=e}return null!=t&&(3==t.length?new RGBColor(t[0],t[1],t[2]):4==t.length&&(t[3]=parseFloat(t[3]).toFixed(2),new RGBColor(t[0],t[1],t[2],t[3])))}function RGBColor(e,t,n,a){var o=void 0===a?1:Math.max(0,Math.min(1,a)),i={r:Math.max(0,Math.min(255,e)),g:Math.max(0,Math.min(255,t)),b:Math.max(0,Math.min(255,n))},r=null;function s(){var e=Math.max(i.r,i.g,i.b),t=e-Math.min(i.r,i.g,i.b);r={h:function(e,t){var n=0;if(0!=t)switch(e){case i.r:(n=(i.g-i.b)/t*60)<0&&(n+=360);break;case i.g:n=(i.b-i.r)/t*60+120;break;case i.b:n=(i.r-i.g)/t*60+240}return n}(e,t),s:0==e?0:100*t/e,v:e/2.55}}this.getRGB=function(){return{r:i.r,g:i.g,b:i.b,a:o}},this.getHSV=function(){return null==r&&s(),{h:r.h,s:r.s,v:r.v,a:o}}}function HSVColor(e,t,n,a){var o=void 0===a?1:Math.max(0,Math.min(1,a)),s={h:(e%360+360)%360,s:Math.max(0,Math.min(100,t)),v:Math.max(0,Math.min(100,n))},l=null;this.getRGB=function(){return null==l&&function(){var e=s.v,t=s.v,n=s.v;if(0!=s.s){var a=s.h/60-Math.floor(s.h/60),o=s.v*(1-s.s/100),i=s.v*(1-s.s/100*a),r=s.v*(1-s.s/100*(1-a));switch(Math.floor(s.h/60)){case 0:e=s.v,t=r,n=o;break;case 1:e=i,t=s.v,n=o;break;case 2:e=o,t=s.v,n=r;break;case 3:e=o,t=i,n=s.v;break;case 4:e=r,t=o,n=s.v;break;case 5:e=s.v,t=o,n=i}}l={r:2.55*e,g:2.55*t,b:2.55*n}}(),{r:l.r,g:l.g,b:l.b,a:o}},this.getHSV=function(){return{h:s.h,s:s.s,v:s.v,a:o}}}RGBColor.prototype=new Color,HSVColor.prototype=new Color;var fastColorPickerSource='<div class="firstLine"><table cellspacing="0" cellpadding="0"><tbody><tr><td><div title="черный" style="background-color:rgb(0,0,0)"></div></td><td><div title="темно-серый (4)" style="background-color:rgb(67,67,67)"></div></td><td><div title="темно-серый (3)" style="background-color:rgb(102,102,102)"></div></td><td><div title="темно-серый (2)" style="background-color:rgb(153,153,153)"></div></td><td><div title="темно-серый (1)" style="background-color:rgb(183,183,183)"></div></td><td><div title="серый" style="background-color:rgb(204,204,204)"></div></td><td><div title="светло-серый (1)" style="background-color:rgb(217,217,217)"></div></td><td><div title="светло-серый (2)" style="background-color:rgb(239,239,239)"></div></td><td><div title="светло-серый (3)" style="background-color:rgb(243,243,243)"></div></td><td><div title="белый" style="background-color:rgb(255,255,255)"></div></td></tr></tbody></table></div><div class="secondLine"><table cellspacing="0" cellpadding="0"><tbody><tr><td><div title="малиновый " style="background-color:rgb(152,0,0)"></div></td><td><div title="красный" style="background-color:rgb(255,0,0)"></div></td><td><div title="оранжевый" style="background-color:rgb(255,153,0)"></div></td><td><div title="желтый" style="background-color:rgb(255,255,0)"></div></td><td><div title="зеленый" style="background-color:rgb(0,255,0)"></div></td><td><div title="бирюзовый" style="background-color:rgb(0,255,255)"></div></td><td><div title="васильковый " style="background-color:rgb(74,134,232)"></div></td><td><div title="синий" style="background-color:rgb(0,0,255)"></div></td><td><div title="фиолетовый" style="background-color:rgb(153,0,255)"></div></td><td><div title="пурпурный" style="background-color:rgb(255,0,255)"></div></td></tr></tbody></table></div><div class="mainLine"><table cellspacing="0" cellpadding="0"><tbody><tr><td><div title="светло-малиновый 3" style="background-color:rgb(230,184,175)"></div></td><td><div title="светло-красный (3)" style="background-color:rgb(244,204,204)"></div></td><td><div title="светло-оранжевый (3)" style="background-color:rgb(252,229,205)"></div></td><td><div title="светло-желтый (3)" style="background-color:rgb(255,242,204)"></div></td><td><div title="светло-зеленый (3)" style="background-color:rgb(217,234,211)"></div></td><td><div title="светло-бирюзовый (3)" style="background-color:rgb(208,224,227)"></div></td><td><div title="светло-васильковый 3" style="background-color:rgb(201,218,248)"></div></td><td><div title="светло-синий (3)" style="background-color:rgb(207,226,243)"></div></td><td><div title="светло-фиолетовый (3)" style="background-color:rgb(217,210,233)"></div></td><td><div title="светло-пурпурный (3)" style="background-color:rgb(234,209,220)"></div></td></tr><tr><td><div title="светло-малиновый 2" style="background-color:rgb(221,126,107)"></div></td><td><div title="светло-красный (2)" style="background-color:rgb(234,153,153)"></div></td><td><div title="светло-оранжевый (2)" style="background-color:rgb(249,203,156)"></div></td><td><div title="светло-желтый (1)" style="background-color:rgb(255,229,153)"></div></td><td><div title="светло-зеленый (2)" style="background-color:rgb(182,215,168)"></div></td><td><div title="светло-бирюзовый (2)" style="background-color:rgb(162,196,201)"></div></td><td><div title="светло-васильковый 2" style="background-color:rgb(164,194,244)"></div></td><td><div title="светло-синий (2)" style="background-color:rgb(159,197,232)"></div></td><td><div title="светло-фиолетовый (2)" style="background-color:rgb(180,167,214)"></div></td><td><div title="светло-пурпурный (2)" style="background-color:rgb(213,166,189)"></div></td></tr><tr><td><div title="светло-малиновый 1" style="background-color:rgb(204,65,37)"></div></td><td><div title="светло-красный (1)" style="background-color:rgb(224,102,102)"></div></td><td><div title="светло-оранжевый (1)" style="background-color:rgb(246,178,107)"></div></td><td><div title="светло-желтый (2)" style="background-color:rgb(255,217,102)"></div></td><td><div title="светло-зеленый (1)" style="background-color:rgb(147,196,125)"></div></td><td><div title="светло-бирюзовый (1)" style="background-color:rgb(118,165,175)"></div></td><td><div title="светло-васильковый 1" style="background-color:rgb(109,158,235)"></div></td><td><div title="светло-синий (1)" style="background-color:rgb(111,168,220)"></div></td><td><div title="светло-фиолетовый (1)" style="background-color:rgb(142,124,195)"></div></td><td><div title="светло-пурпурный (1)" style="background-color:rgb(194,123,160)"></div></td></tr><tr><td><div title="темно-малиновый 1" style="background-color:rgb(166,28,0)"></div></td><td><div title="темно-красный (1)" style="background-color:rgb(204,0,0)"></div></td><td><div title="темно-оранжевый (1)" style="background-color:rgb(230,145,56)"></div></td><td><div title="темно-желтый (1)" style="background-color:rgb(241,194,50)"></div></td><td><div title="темно-зеленый (1)" style="background-color:rgb(106,168,79)"></div></td><td><div title="темно-бирюзовый (1)" style="background-color:rgb(69,129,142)"></div></td><td><div title="темно-васильковый 1" style="background-color:rgb(60,120,216)"></div></td><td><div title="темно-синий (1)" style="background-color:rgb(61,133,198)"></div></td><td><div title="темно-фиолетовый (1)" style="background-color:rgb(103,78,167)"></div></td><td><div title="темно-пурпурный (1)" style="background-color:rgb(166,77,121)"></div></td></tr><tr><td><div title="темно-малиновый 2" style="background-color:rgb(133,32,12)"></div></td><td><div title="темно-красный (2)" style="background-color:rgb(153,0,0)"></div></td><td><div title="темно-оранжевый (2)" style="background-color:rgb(180,95,6)"></div></td><td><div title="темно-желтый (2)" style="background-color:rgb(191,144,0)"></div></td><td><div title="темно-зеленый (2)" style="background-color:rgb(56,118,29)"></div></td><td><div title="темно-бирюзовый (2)" style="background-color:rgb(19,79,92)"></div></td><td><div title="темно-васильковый 2" style="background-color:rgb(17,85,204)"></div></td><td><div title="темно-синий (2)" style="background-color:rgb(11,83,148)"></div></td><td><div title="темно-фиолетовый (2)" style="background-color:rgb(53,28,117)"></div></td><td><div title="темно-пурпурный (2)" style="background-color:rgb(116,27,71)"></div></td></tr><tr><td><div title="темно-малиновый 3" style="background-color:rgb(91,15,0)"></div></td><td><div title="темно-красный (3)" style="background-color:rgb(102,0,0)"></div></td><td><div title="темно-оранжевый (3)" style="background-color:rgb(120,63,4)"></div></td><td><div title="темно-желтый (3)" style="background-color:rgb(127,96,0)"></div></td><td><div title="темно-зеленый (3)" style="background-color:rgb(39,78,19)"></div></td><td><div title="темно-бирюзовый (3)" style="background-color:rgb(12,52,61)"></div></td><td><div title="темно-васильковый 3" style="background-color:rgb(28,69,135)"></div></td><td><div title="темно-синий (3)" style="background-color:rgb(7,55,99)"></div></td><td><div title="темно-фиолетовый (3)" style="background-color:rgb(32,18,77)"></div></td><td><div title="темно-пурпурный (3)" style="background-color:rgb(76,17,48)"></div></td></tr></tbody></table></div>',colorPickerContainer,colorPickerListContainer,colorPicker;function arraysEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function mixObjectsValues(e,t){var n=jQuery.extend({},e);for(prop in t)t.hasOwnProperty(prop)&&e.hasOwnProperty(prop)&&("object"==typeof e[prop]?n[prop]=mixObjectsValues(e[prop],t[prop]):n[prop]=t[prop]);return n}function setTypesValues(e){for(typeId in $(".panels-block .panel[data-id="+e.currentType+"]").click(),e.types)for(prop in e.types[typeId])switch(object=$("[name='types["+typeId+"]["+prop+"]']"),value=e.types[typeId][prop],typeof value){case"object":i=0,object.each(function(){void 0!==value[i]&&($(this).prop("checked",1==parseInt(value[i])),$(this).change()),i++});break;case"boolean":1==object.length&&object.prop("checked",value).change();break;default:1==object.length&&object.val(value).change()}}function showPredefinedDesigns(e,t){if(null==t&&(t=!0),void 0!==typeof e){for(param in type=e.type,$(".design-setting-group").hide(),$(".design-setting-group[data-type="+type+"]").show(),$("#design-type").val(type),window.updateTimerFlag=!1,e.params)switch(object=$("[name='design["+type+"]["+param+"]']"),value=e.params[param],typeof value){case"object":if(param.match(/^.*family$/))void 0!==value.family&&1==object.length&&object.val(value.family).change();else if(0<value.length)for(currentValue in value)object=$("[name='design["+type+"]["+param+"]["+currentValue+"]']"),$(object).val(value[currentValue]).change();break;case"boolean":1==object.length&&object.prop("checked",value);break;default:1==object.length&&object.val(value).change()}window.updateTimerFlag=!0,updateTimer(getDesignSettings(),!1);var n=null!=e.theme?e.theme:"white";$(".switch-background-button."+n).click(),t&&!$("#main-nav li[data-id=3]").hasClass("tooltips")&&window.allowDesignToolTip&&(window.allowDesignToolTip=!1,$("#main-nav li[data-id=3]").addClass("tooltips"),$("#main-nav li[data-id=3] span").show(),setTimeout(function(){$("#main-nav li[data-id=3] span").fadeOut(1500,function(){$("#main-nav li[data-id=3]").removeClass("tooltips")})},2500))}}function getViewSettings(){var t=[1,1,1,1];return $('[name^="view["]').each(function(){var e=parseInt($(this).attr("name").replace(new RegExp("view\\[(.*)\\]"),"$1"));t[e]=$(this).prop("checked")?1:0}),t}function setViewSettings(e){if(null==e||4!=e.length)return!1;for(var t=0;t<e.length;t++)$('[name^="view['+t+']"]').prop("checked",!!e[t]&&"checked");return!0}function getTimeSettings(){var t=$("#type-currentType").val();(null==t||t<1||3<t)&&(t=1);var n={};return $('[name^="types['+t+']"]').each(function(){var e=$(this).attr("name").replace(new RegExp("types\\["+t+"\\]\\[(.*)\\]"),"$1");"weekdays"==e?(null==n[e]&&(n[e]=[]),n[e].push($(this).prop("checked")?1:0)):"checkbox"==$(this).attr("type")?n[e]=$(this).prop("checked"):"radio"==$(this).attr("type")?$(this).prop("checked")&&(n[e]=$(this).val()):n[e]=$(this).val()}),{currentType:t,params:n}}function importTimeSettings(e){var t=new Date,n=[],a=parseInt(e.currentType);switch(a){case 1:n.usertime=e.params.usertime,n.tz=e.params.tz;var o=e.params.utc;null==o&&(o=t.getTime()),e.params.usertime||(o+=60*e.params.tz*6e4),o+=6e4*t.getTimezoneOffset();var i=new Date;i.setTime(o);for(var r=[i.getDate(),i.getMonth()+1,i.getFullYear(),i.getHours(),i.getMinutes()],s=0;s<r.length;s++)r[s]=""+r[s],1==r[s].length&&(r[s]="0"+r[s]);n.date=r[0]+"/"+r[1]+"/"+r[2],n.time=r[3]+":"+r[4];break;case 2:n.start=e.params.startByFirst?[1,0]:[0,1],n.days=e.params.days,n.hours=e.params.hours,n.minutes=e.params.minutes;break;case 3:n.weekdays=e.params.weekdays,n.usertime=e.params.usertime,n.time=e.params.time,n.tz=Math.round(e.params.tz/-60),n.hours=e.params.hours,n.minutes=e.params.minutes}return e.types={},e.types[a]=n,e}function getExportParams(){var e=getTimeSettings(),t={},n=new Date;switch(parseInt(e.currentType)){case 1:t.usertime=e.params.usertime,t.tz=e.params.tz;var a=e.params.date.split("/");3==a.length&&(n.setYear(a[2]),n.setMonth(a[1]-1),n.setDate(a[0]));var o=e.params.time.split(":");2==o.length&&(n.setHours(o[0]),n.setMinutes(o[1]),n.setSeconds(0),n.setMilliseconds(0)),t.utc=n.getTime()-6e4*n.getTimezoneOffset(),e.params.usertime||(t.utc-=60*e.params.tz*6e4);break;case 2:t.startByFirst="first_enter"==e.params.start,t.days=e.params.days,t.hours=e.params.hours,t.minutes=e.params.minutes,t.utc=0,t.startByFirst||(t.utc=n.getTime());break;case 3:t.weekdays=e.params.weekdays,t.usertime=e.params.usertime,t.time=e.params.time,t.tz=-60*e.params.tz,t.hours=e.params.hours,t.minutes=e.params.minutes}e.params=t;var i=$(".design-list .selected").data("id");i=null!=i?parseInt(i):1;var r=$(".fixed-block").hasClass("black")?"black":"white",s={view:getViewSettings(),type:e,design:getDesignSettings(),designId:i,theme:r,width:$("#timerPreview").width(),height:$("#timerPreview").height()};return JSON.stringify(s)}function parseInputCode(e,o){var t=e.match(/<script\s+src=\"(.*?)\">?/m);return null!=t&&1<t.length?$.ajax({url:t[1],dataType:"text",success:function(e){if(n=null,""!=e){var t=e.match(/_id\s*=\s*\"(.*?)\".*new\s+MegaTimer\s*\(.*?\,\s*(.*?)\)\;if/m);if(null!=t&&3==t.length&&(window.jsSrcId=t[1],null!=t[2])){var n=t[2];try{n=JSON.parse(n)}catch(e){n=null}finally{if(null!=n){if(window.importedCode=t[2],null!=n.view&&setViewSettings(n.view),null!=n.type){var a=importTimeSettings(n.type);setTypesValues(mixObjectsValues(defaultTypesValues,a))}null!=n.design&&showPredefinedDesigns(n.design,!1),null!=n.designId&&selectDesign($(".design-list [data-id="+n.designId+"]"),!1),null!=n.theme&&$(".switch-background-button."+n.theme).click()}}}}o(n)},error:function(){o(null)}}):o(null),null}function getDesignSettings(){var o=$("#design-type").val();null==o&&(o="text");var i={};return $('[name^="design['+o+']"]').each(function(){if(!$(this).parent().hasClass("ignore")){var e=$(this).attr("name").replace(new RegExp("design\\["+o+"\\]\\[(.*)\\]"),"$1");if("checkbox"==$(this).attr("type"))i[e]=$(this).prop("checked");else if(e.match(/^.*\-family$/)){var t=fontList[$(this).val()];if(void 0!==t&&null!=t){var n=0;for(var a in t)t.hasOwnProperty(a)&&n++;i[e]=0==n?{family:$(this).val()}:t}}else(matches=e.match(/(.*)\]\[(\d+)/))?(null==i[matches[1]]&&(i[matches[1]]=[]),i[matches[1]][matches[2]]=$(this).val()):i[e]=$(this).val()}}),{type:o,params:i}}function updateTimer(e,t){var n=window.lptimer,a=n.params.design.params,o=!0;if(void 0!==a&&(null==e?e=n.params.design:o=!Object.equals(e,a)),null==t&&(t=!1),o){!t||"plate"!=e.type||"flipchart"!=e.params.effect&&"slide"!=e.params.effect?null!=window.flipchartNoAnimateTimer&&clearTimeout(window.flipchartNoAnimateTimer):(e.params.effect="flipchart"==e.params.effect?"none":"no-slide",null!=window.flipchartNoAnimateTimer&&clearTimeout(window.flipchartNoAnimateTimer),window.flipchartNoAnimateTimer=setTimeout(function(){updateTimer(null,!1),window.flipchartNoAnimateTimer=null},2e3)),n.destroy();var i={view:getViewSettings(),type:{currentType:1,params:{utc:timeToEndOfMonth,usertime:!0}},design:e};window.lptimer=null,window.lptimer=new MegaTimer(n.id,i),window.lptimer.run()}setContainerMargin()}function isIE(){var e;return e=window.navigator.userAgent.toLowerCase(),/trident/gi.test(e)||/msie/gi.test(e)}function initColorPicker(){(null==colorPickerContainer||null==colorPickerListContainer||null==colorPicker||isIE())&&(colorPickerContainer=document.createElement("div"),colorPickerListContainer=document.createElement("div"),colorPickerLastColors=document.createElement("div"),colorPicker=new ColorPicker(colorPickerContainer,colorPickerListContainer,colorPickerLastColors,"black",null),lastColors=getCookie("lastColors"),lastColors&&(lastColors+="",lastColors=lastColors.split("|"),1==lastColors.length&&""==lastColors[0]&&(lastColors=[]),colorPicker.setLastColors(lastColors)))}function showColorPicker(e,t,n,a,o){var i,r,s;return initColorPicker(),void 0!==t&&colorPicker.setOnSave(t),void 0!==n&&colorPicker.setOnChange(n),void 0===a&&(a=function(){}),null==e&&(e="black"),colorPicker.setValue(e),null==o&&(o=!1),colorPicker.setHideOpacity(o),s={"Готовые цвета":colorPickerListContainer,"Палитра":colorPickerContainer},r=function(e){return setCookie("colorPickerTab",e,{expires:864e4,path:"/"})},null==(i=getCookie("colorPickerTab"))&&(i=0),showModal(generateTabs(s,i,r),440,520,"Цвет текста",colorPickerLastColors,a,null,!0)}function showModal(e,t,n,a,o,i,r,s){return TINY.box.destroy(),null==a&&(a=null),null==o&&(o=null),null==i&&(i=null),null==r&&(r=null),null==s&&(s=!1),null!=TINY.box?TINY.box.show({html:e,width:t,height:n,title:a,footer:o,closejs:i,onloadevent:r,savePosition:s}):null}function hideModal(){return null!=TINY.box?TINY.box.hide():null}function generateTabs(e,t,s){var n,a,o,i,r,l,d,c;if(null==t&&(t=0),null==s&&(s=null),t=parseInt(t),null==e)return null;for(c in(r=document.createElement("div")).className="tabs",(d=document.createElement("ul")).className="tabs-title clearfix",(l=document.createElement("div")).className="tabs-content clearfix",r.appendChild(d),r.appendChild(l),a=0,e)e.hasOwnProperty(c)&&(n=e[c],(i=document.createElement("li")).innerHTML=c,i.setAttribute("data-id",a),a===t&&(i.className="active"),d.appendChild(i),(o=document.createElement("div")).setAttribute("data-id",a),"string"==typeof n?o.innerHTML=n:o.appendChild(n),o.style.display=a===t?"block":"none",a===t&&(o.id="selected-modal-tab"),l.appendChild(o),this,i.onclick=function(){var e,t,n,a,o,i,r;if(""===this.className){for(t=0,a=(i=d.childNodes).length;t<a;t++)"active"===(e=i[t]).className&&$(e).removeClass("active");for(this.className="active",n=0,o=(r=l.childNodes).length;n<o;n++)(e=r[n]).style.display="none",e.id="";if(l.childNodes.length>this.getAttribute("data-id")&&(l.childNodes[this.getAttribute("data-id")].style.display="block",l.childNodes[this.getAttribute("data-id")].id="selected-modal-tab"),null!=s)return s(this.getAttribute("data-id"))}},a++);return r}function getCookie(e){var t;return(t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(t[1]):null}function setCookie(e,t,n){var a,o,i,r,s,l,d;for("number"==typeof(o=(n=n||{}).expires)&&o&&((a=new Date).setTime(a.getTime()+1e3*o),o=n.expires=a),o&&o.toUTCString&&(n.expires=o.toUTCString()),s=e+"="+(t=encodeURIComponent(t)),l=0,d=n.length;l<d;l++)s+="; "+(i=n[l]),!0!==(r=n[i])&&(s+="="+r);return document.cookie=s}function selectDesign(e,t){$(".design-list .selected").removeClass("selected"),$(e).addClass("selected"),t&&(id=$(e).data("id"),null!=id&&void 0!==typeof designs[id]&&showPredefinedDesigns(designs[id],!0))}function setContainerMargin(){margin=$("body").hasClass("fixed")?$(".fixed-block").height()+$(".fixed-top").height():0,margin!=parseInt($(".container").css("margin-top"))&&$(".container").css("margin-top",margin)}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function repostedModal(){$("body").addClass("share-mode"),counter=20,$("#share-block .counter").text(20);var e=setInterval(function(){value=parseInt($("#share-block .counter").text()),(value<=0||null==value)&&(clearInterval(e),$("body").removeClass("share-mode"),sendCodeRequest(null,!0)),$("#share-block .counter").text(value-1)},1e3)}function sendCodeRequest(e,t){$("#share-block").hide(),$("#email").hide(),$("#code-changed").hide(),$("#output-block").show(),$("#output-code-0").val("");var n=getExportParams();if(null!=window.importedCode&&window.importedCode!=n){if(null==e)return $("#output-block").hide(),$("#email").hide(),void $("#code-changed").show();window.importedCode=null}n=encodeURIComponent(n),$("#step-4").addClass("load");var a="code="+n+"&";null!=window.jsSrcId&&(a+="id="+window.jsSrcId),$.ajax({type:"POST",url:"/api/save_timer.php",dataType:"json",data:a,success:function(e){0==e.res?alert("Произошла ошибка при сохранении таймера"):""!=e.src&&""!=e.id&&(window.jsSrcId=e.id,$("#output-code-0").val('<script src="'+e.src+'"><\/script>')),$("#step-4").removeClass("load")},error:function(){$("#step-4").removeClass("load")}})}function showWnd(e){var t=$("#wnd-wrap"),n=t.children("#"+e);n.length&&($("html").addClass("no_scroll"),n.show(),t.show())}function fixFooter(){var e={body:$("body"),footer:$(".footer"),windowHeight:$(window).height(),z:0};e.footerHeight=e.footer.outerHeight(),$(window).height()-$("body").height()>=e.footerHeight?e.body.addClass("fixed-footer"):e.body.removeClass("fixed-footer")}function onMegatimerResize(){fixFooter()}Object.equals=function(t,n){var e=Object.keys(t),a=Object.keys(n);return e.length==a.length&&!e.filter(function(e){return"object"==typeof t[e]||Array.isArray(t[e])?!Object.equals(t[e],n[e]):t[e]!=n[e]}).length},$(document).ready(function(){fixFooter(),$(window).resize(function(){clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout("onMegatimerResize()",100)}),$("#main-nav li").click(function(){null!=$(this).data("id")&&($("#main-nav li").removeClass("active"),$(this).addClass("active"),$(".timer-editor .step").hide(),$(".timer-editor #step-"+$(this).data("id")).show(),window.allowDesignToolTip=!0,$("#main-nav li[data-id=3] span").hide(),$("#main-nav li[data-id=3]").removeClass("tooltips"),4==$(this).data("id")?($("#next-step").hide(),sendCodeRequest()):5==$(this).data("id")?($(".load-code-error").hide(),$(".load-code-success").hide(),$(".load-code-start").show(),$("#next-step").hide()):$("#next-step").show(),fixFooter())}),$(".panels-block .panel").click(function(){$(".panels-block .panel").removeClass("panel-success").addClass("panel-primary"),$(this).addClass("panel-success"),$(".timer-editor .timer-type").hide(),$(".timer-editor #timer-type-"+$(this).data("id")).show(),$(".timer-type-liner .block").css("visibility","hidden"),$(".timer-type-liner .block[data-id="+$(this).data("id")+"]").css("visibility","visible"),$("#type-currentType").val($(this).data("id"))}),$("#more-examples").click(function(){return $(".step-1-examples h4").text("Примеры:"),$(".step-1-examples").addClass("max"),$(".more-examples").show(),$(this).hide(),!1}),$("#hide-examples").click(function(){return $(".step-1-examples h4").text("Примеры:"),$(".step-1-examples").removeClass("max"),$(".more-examples").hide(),$("#more-examples").show(),!1}),$(".example-action").click(function(){return"undefined"!=typeof examples&&null!==examples&&(example=examples[$(this).data("id")],"undefined"!=typeof example&&null!==example&&setTypesValues(mixObjectsValues(defaultTypesValues,example))),!1}),$("a.weekdays").click(function(e){return $(e.target).closest("span.active").length?(e.stopPropagation(),!($(e.target).hasClass("active")&&"span"==$(e.target).get(0).tagName.toLowerCase())):($(this).find("span.weekdays-list").toggleClass("active"),!1)}),$(document).click(function(e){$(e.target).closest("a.weekdays").length||($("a.weekdays span.active").removeClass("active"),e.stopPropagation())}),$("a.weekdays input").change(function(){var e=[0,0,0,0,0,0,0],t=[];$("a.weekdays input:checked").each(function(){e[parseInt($(this).val())]=1,t.push($(this).parent().text().trim())});var n="";n=arraysEqual(e,[0,0,0,0,0,1,1])?"в выходные дни":arraysEqual(e,[1,1,1,1,1,0,0])?"в будние дни":arraysEqual(e,[1,1,1,1,1,1,1])?"каждый день":0<t.length?1<t.length?"в указанные дни":t.join():"никогда",$("#weekdays-title").text(n)}),dateArray=[showDate.getDate(),showDate.getMonth()+1,showDate.getFullYear(),showDate.getHours(),showDate.getMinutes()];for(var e=0;e<dateArray.length;e++)dateArray[e]=""+dateArray[e],1==dateArray[e].length&&(dateArray[e]="0"+dateArray[e]);for(designKey in date=dateArray[0]+"/"+dateArray[1]+"/"+dateArray[2],time=dateArray[3]+":"+dateArray[4],$("#type-1-date").datetimepicker({lang:"ru",timepicker:!1,format:"d/m/Y",value:null}).val(date),$("#type-1-time").datetimepicker({lang:"ru",datepicker:!1,format:"H:i",value:null}).val(time),$("#type-3-time").datetimepicker({lang:"ru",datepicker:!1,format:"H:i",value:null}).val(time),checked=!1,designs)design=designs[designKey],type=design.type,img=design.img,null==type||null==img||"text"!=type&&"plate"!=type&&"circle"!=type||($(".design-list").append($("<div/>").addClass("img-containter").addClass(checked?"":"selected").append($("<div/>").addClass("check-green")).css("background-image","url('"+img+"')").attr("data-id",designKey).addClass("design-filter-"+type).click(function(){selectDesign($(this),!0)})),checked=!0);$("#design-filter input").change(function(){$("#design-filter input").each(function(){objects=$(".design-list .design-filter-"+$(this).data("id")),$(this).prop("checked")?objects.show():objects.hide()})}),$("select.font-family-selector").each(function(){if(void 0!==typeof fontList&&null!==fontList)for(font in fontList)option=$("<option>").text(font).val(font),$(this).append(option)}),$("input.color-control").change(function(){$(this).css("backgroundColor",$(this).val())}).click(function(){currentColor=$(this).val(),saved=!1,_self=this,saveColorPicker=function(e){$(_self).val(e).change(),saved=!0,hideModal(),setCookie("lastColors",colorPicker.getLastColors().join("|"))},changeColorPicker=function(e){$(_self).css("backgroundColor",e).val(e).change()},closeColorPicker=function(){saved||$(_self).val(currentColor).change()},hideOpacity=$(this).hasClass("hide-opacity"),showColorPicker(currentColor,saveColorPicker,changeColorPicker,closeColorPicker,hideOpacity)}),$(".smart-color-selector").change(function(){value=$(this).val(),id=$(this).data("id"),$(".smart-color-selector-block[data-id="+id+"]").addClass("ignore").hide(),$(".smart-color-selector-"+value+"[data-id="+id+"]").removeClass("ignore").show()}),$("#next-step").click(function(){id=parseInt($("#main-nav li.active").data("id"))+1,4<id&&(id=4),id<0&&(id=0),$("#main-nav li[data-id="+id+"]").click()}),showPredefinedDesigns(initParams.design,!1),$(".ui.checkbox").checkbox(),$("[name^=design]").change(function(){void 0===window.updateTimerFlag&&(window.updateTimerFlag=!0),window.updateTimerFlag&&updateTimer(getDesignSettings(),"design[plate][effect]"!=$(this).attr("name"))}),$(".local-time input").change(function(){$(this).parent().parent().find("select").prop("disabled",$(this).prop("checked"))}),$(".switch-elements input").change(function(){updateTimer(null,!0),$("#main-nav li[data-id=4]").hasClass("active")&&$("#main-nav li[data-id=4]").click()}),$(".switch-background-button").click(function(){$(".fixed-block").removeClass("white").removeClass("black").addClass($(this).hasClass("white")?"white":"black"),$("#main-nav li[data-id=4]").hasClass("active")&&$("#main-nav li[data-id=4]").click()}),$("[name='design[plate][effect]']").change(function(){$("[name='design[plate][background]'] option[value='opacity']").prop("disabled","flipchart"==$(this).val()&&"disabled"),$("[name^='design[plate][background-color]']").toggleClass("hide-opacity","flipchart"==$(this).val())}),$("[name='design[plate][background]']").change(function(){$("[name='design[plate][effect]'] option[value='flipchart']").prop("disabled","opacity"==$(this).val()&&"disabled")}),$("#load-code-submit").click(function(){var e=$("#load-code").val();$("#step-5").addClass("load"),$(".load-code-start").css("visibility","hidden"),parseInputCode(e,function(e){$("#step-5").removeClass("load"),$(".load-code-start").css("visibility","visible"),null==e?$(".load-code-error").show():($(".load-code-error").hide(),$(".load-code-success").show(),$(".load-code-start").hide())})}),$("#pin").click(function(){$(this).removeClass("temp").removeClass("temp-fixed"),$(this).addClass($("body").hasClass("fixed")?"temp":"temp-fixed"),removeClasses=function(){$(this).removeClass("temp").removeClass("temp-fixed"),$(this).unbind("mouseout",removeClasses)},$(this).bind("mouseout",removeClasses),$("body").toggleClass("fixed"),setContainerMargin()}),$("input[type=range]").mousedown(function(){window.currentInputRange=$(this).attr("name")}).mouseup(function(){window.currentInputRange=null}).mousemove(function(){window.currentInputRange==$(this).attr("name")&&$(this).change()}),$(".email-link").click(function(){return $("#output-block").hide(),$("#email").show(),!1}),$(".range-tooltips").mouseover(function(){var e=$(this).find("input:not(.sync)"),t=$(this).find("input.sync");null!=e&&null!=t&&$(e).val()!=$(t).val()&&$(t).val($(e).val())});var t=function(){var e=$(this).parent().parent().find("input.sync");null!=e&&$(this).val()!=$(e).val()&&$(e).val($(this).val())};$(".range-tooltips input:not(.sync)").change(t).mousewheel(t).keypress(t),$("input.sync").mousedown(function(){$(this).parent().parent().addClass("hover")}).mouseup(function(){$(this).parent().parent().removeClass("hover")}).change(function(){var e=$(this).parent().parent().find("input:not(.sync)");null!=e&&$(e).val()!=$(this).val()&&e.val($(this).val()).change()}),$("#send-email").click(function(){if(null!=window.jsSrcId){id=window.jsSrcId,2==id.length&&(id=id[1]);var e=$("#email-field").val();if(validateEmail(e)){var t={id:id,email:e};$.ajax({type:"POST",url:"/email.php",dataType:"text",data:t,success:function(e){1==e?$("#email .message").removeClass("error").text("Письмо успешно отправлено"):$("#email .message").addClass("error").text("Ошибка")},error:function(){$("#email .message").addClass("error").text("Ошибка")}})}else $("#email .message").addClass("error").text("Неправильный email")}}),$("#code-changed-create").click(function(){sendCodeRequest(!(window.jsSrcId=null))}),$("#code-changed-update").click(function(){sendCodeRequest(!0)}),$(document).on("click",".wnd",function(e){return e.stopPropagation(),!1}).on("click","#wnd-wrap, .wnd-close",function(e){$("#wnd-wrap").hide().children().hide(),$("html").removeClass("no_scroll")})});var defaultTypesValues={currentType:1,types:{1:{date:"",time:"",tz:3,usertime:!0},2:{start:[1,0],days:"",hours:"",minutes:""},3:{weekdays:[1,1,1,1,1,1,1],time:"",tz:3,usertime:!0,hours:"",minutes:""}}};